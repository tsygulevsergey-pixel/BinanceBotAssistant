1) Проверка размера тела (body ≥ 0.4·ATR)

Применять к пробойной свече. Это фильтр силы именно пробоя.

На ретесте такую же жесткую планку не ставим — иначе вырежешь много годных возвратов.
Для свечи-триггера ретеста достаточно:

close ≥ breakout_level + 0.05–0.10·ATR (ре-клейм уровня),

и либо body ≥ 0.15–0.25·ATR, либо close в верхних 30% диапазона бара, либо нижняя тень ≥ max(body, 0.5·body_prev).

2) База для сравнения объёма: медиана vs EMA

База = rolling median(20) (устойчива к выбросам, лучше на крипто-спайках).

Доп. фильтр тренда объёма = EMA(20) (чтобы не принимать «аномалию» при явном спадe оборота).

3) +DI / −DI: нужен ли «зазор»?

Да, зазор нужен (уменьшает шум). Порог по отношению:

15m: +DI / −DI ≥ 1.20–1.25

1H: +DI / −DI ≥ 1.15–1.20

4H/1D: +DI / −DI ≥ 1.10–1.15

Плюс проверь динамику тренда силы: ADX ≥ 22 и ADX_now ≥ ADX_prev (или ADX_now - ADX_prev ≥ 0).

4) «Игла» до −0.45·ATR (liquidity sweep)

Твоя идея близка, но добавь тайминг и качество закрытия.
Правила для лонга после пробоя:

Прокол: low ≤ breakout_level − 0.45·ATR и low > breakout_level − 0.60·ATR (не разрешай слишком глубокий слом).

Быстрый возврат: ре-клейм уровня в той же свече или в следующей (макс. за 2 бара от касания).

Критерии ре-клейма (на свече-триггере):

close ≥ breakout_level + 0.05–0.10·ATR,

close_pct ≥ 0.70 от диапазона бара (закрытие в верхних 30%),

объём: z ≥ 1.0 по схеме из п.2 (либо vol ≥ 1.2*EMA20),

(опция) **нижняя тень ≥ 0.6·range** или нижняя тень ≥ body`.

5) Источник HTF-уровней для «свободного пространства»

Лучше HTF-зоны S/R, а не точечные пики. Если у тебя уже есть H4 swing high/low, сделай из них зоны-кластеры:

Собери последние N (напр. 50–100) H4 swing-high и swing-low.

Сгруппируй точки, лежащие в пределах 0.5·ATR(H4) друг от друга.

Для каждого кластера построй зону:
low_bound = min(cluster) − 0.10·ATR(H4)
up_bound = max(cluster) + 0.10·ATR(H4)

Оставь верхние/нижние M зон по «свежести» и количеству касаний.

Измерение свободного пространства (лонг): расстояние от пробойного закрытия до ближайшей верхней границы ближайшей H4-зоны впереди по тренду. Требуй ≥ 0.8–1.0·ATR(текущий ТФ).
(Опционально добавь конfluence-флаг, если рядом Daily high/low, VAH/VAL/VPOC или AWVAP — но базовый фильтр можно строить только на H4-зонах.)