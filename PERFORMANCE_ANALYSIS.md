# üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

## üéØ –ö–∞–∫ –ø–æ–Ω—è—Ç—å –∫–∞–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ/–ø–ª–æ—Ö–æ

### 1Ô∏è‚É£ –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ Telegram

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
```
/performance
```

**Action Price:**
```
/ap_stats
```

–ü–æ–∫–∞–∂–µ—Ç:
- Total Signals (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- Win Rate (% –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö)
- TP1/TP2 (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã—Ö–æ–¥–æ–≤ –ø–æ —Ç–µ–π–∫–∞–º)
- Average PnL (—Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫)

---

### 2Ô∏è‚É£ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (—Å–∫—Ä–∏–ø—Ç)

```bash
python analytics/strategy_performance.py --days 30
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- üìä –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- üü¢ –¢–æ–ø-3 –ª—É—á—à–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- üî¥ –¢–æ–ø-3 —Ö—É–¥—à–∏—Ö + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
- üìà **Expectancy** (–º–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ) - –≥–ª–∞–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞!

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìä –ê–ù–ê–õ–ò–ó –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò –°–¢–†–ê–¢–ï–ì–ò–ô (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π)
================================================================================

–°—Ç—Ä–∞—Ç–µ–≥–∏—è                      –°–∏–≥–Ω   WR%     Avg PnL   Avg Win   Avg Loss    TP1/TP2/SL   Expect 
-----------------------------------------------------------------------------------------------------------------------
üü¢ Donchian Breakout            45     62.2%   +0.85%    +1.92%    -1.15%     18/10/17      +0.67%
üü° Break & Retest               32     48.4%   +0.15%    +1.45%    -1.08%     8/7/17        +0.14%
üî¥ CVD Divergence               28     35.7%   -0.42%    +1.38%    -1.55%     6/4/18        -0.51%
```

---

## üìà –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### **1. Expectancy (–ú–∞—Ç–æ–∂–∏–¥–∞–Ω–∏–µ) - –ì–õ–ê–í–ù–ê–Ø –ú–ï–¢–†–ò–ö–ê**
```
Expectancy = (WinRate √ó AvgWin) + ((1-WinRate) √ó AvgLoss)
```

- **> 0.3%** üü¢ - –û—Ç–ª–∏—á–Ω–æ! –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏–±—ã–ª—å–Ω–∞
- **0% - 0.3%** üü° - –ù–æ—Ä–º–∞, –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å
- **< 0%** üî¥ - –ü–ª–æ—Ö–æ, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —É–±—ã—Ç–æ—á–Ω–∞

### **2. Win Rate (–í–∏–Ω—Ä–µ–π—Ç)**
- **> 50%** - –•–æ—Ä–æ—à–æ
- **40-50%** - –ü—Ä–∏–µ–º–ª–µ–º–æ (–µ—Å–ª–∏ avg win > avg loss)
- **< 40%** - –ü–ª–æ—Ö–æ, –Ω—É–∂–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è

### **3. Average Win vs Average Loss**
- **Ratio > 1.5** - –•–æ—Ä–æ—à–æ (—Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å > —Å—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫ –≤ 1.5 —Ä–∞–∑–∞)
- **Ratio < 1.0** - –ü–ª–æ—Ö–æ

### **4. TP1/TP2/SL —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ**
- **TP > SL** - –•–æ—Ä–æ—à–æ
- **SL > TP** - –ü–ª–æ—Ö–æ, –º–Ω–æ–≥–æ —Å—Ç–æ–ø–æ–≤

---

## üîß –ß—Ç–æ –º–µ–Ω—è—Ç—å –µ—Å–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–ª–æ—Ö–∞—è

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–∏–∑–∫–∏–π –≤–∏–Ω—Ä–µ–π—Ç (<40%)
**–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

**–†–µ—à–µ–Ω–∏—è:**
```yaml
# config.yaml
scoring:
  min_score: 3.0  # –ë—ã–ª–æ 2.0, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ä–æ–≥

strategy_filters:
  min_adx: 25     # –ë—ã–ª–æ 20, —É–∂–µ—Å—Ç–æ—á–∞–µ–º
  min_atr_pct: 0.3  # –§–∏–ª—å—Ç—Ä –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
```

**–ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å:**
```yaml
strategies:
  - name: "CVD Divergence"
    enabled: false  # –û—Ç–∫–ª—é—á–∞–µ–º –ø–ª–æ—Ö—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: –ë–æ–ª—å—à–∏–µ —É–±—ã—Ç–∫–∏ (Avg Loss < -1.5%)
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–ª–æ—Ö–∏–µ —Å—Ç–æ–ø-–ª–æ—Å—Å—ã

**–†–µ—à–µ–Ω–∏—è:**
```yaml
risk_management:
  max_risk_percent: 1.0  # –ë—ã–ª–æ 2.0, —É–º–µ–Ω—å—à–∞–µ–º —Ä–∏—Å–∫
  stop_loss_type: "zone_based"  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–æ–Ω–æ–≤—ã–µ —Å—Ç–æ–ø—ã
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –õ–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ SL –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 3: –ú–∞–ª–µ–Ω—å–∫–∞—è –ø—Ä–∏–±—ã–ª—å (Avg Win < 1%)
**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç—ã —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ

**–†–µ—à–µ–Ω–∏—è:**
```yaml
risk_management:
  take_profit_1_r: 1.5  # –ë—ã–ª–æ 1.0, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º
  take_profit_2_r: 3.0  # –ë—ã–ª–æ 2.0, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º
  use_trailing_stop: true  # –í–∫–ª—é—á–∏—Ç—å trailing
```

---

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 4: –ú–Ω–æ–≥–æ —Å—Ç–æ–ø–æ–≤ (SL > TP1+TP2)
**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ç–∏–≤ —Ç—Ä–µ–Ω–¥–∞ –∏–ª–∏ –≤ —á–æ–ø–µ

**–†–µ—à–µ–Ω–∏—è:**
```yaml
strategy_filters:
  min_trend_strength: 0.6  # –¢–æ–ª—å–∫–æ —Å–∏–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
  block_chop: true  # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —á–æ–ø
  btc_alignment_required: true  # –¢–æ–ª—å–∫–æ —Å BTC
```

---

## üí° –û–±—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –°–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–º–∏–Ω–∏–º—É–º 20-30 —Å–∏–≥–Ω–∞–ª–æ–≤)
```bash
python analytics/strategy_performance.py --days 30
```

### –®–∞–≥ 2: –ù–∞–π—Ç–∏ —Ö—É–¥—à–∏–µ (Expectancy < 0%)
–°–º–æ—Ç—Ä–∏–º –Ω–∞ üî¥ –∫—Ä–∞—Å–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### –®–∞–≥ 3: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- WR < 40% ‚Üí **—É–∂–µ—Å—Ç–æ—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã**
- Avg Loss –±–æ–ª—å—à–æ–π ‚Üí **—É–º–µ–Ω—å—à–∏—Ç—å —Ä–∏—Å–∫/—É–ª—É—á—à–∏—Ç—å SL**
- Avg Win –º–∞–ª–µ–Ω—å–∫–∏–π ‚Üí **—É–≤–µ–ª–∏—á–∏—Ç—å TP**
- –ú–Ω–æ–≥–æ SL ‚Üí **–¥–æ–±–∞–≤–∏—Ç—å trend/regime —Ñ–∏–ª—å—Ç—Ä—ã**

### –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º `config.yaml`:
```yaml
strategies:
  - name: "CVD Divergence"
    enabled: true  # –ò–ª–∏ false –µ—Å–ª–∏ —Å–æ–≤—Å–µ–º –ø–ª–æ—Ö–æ
    params:
      lookback: 20
      min_divergence: 0.5  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ä–æ–≥
```

### –®–∞–≥ 5: –¢–µ—Å—Ç (–µ—â–µ 20-30 —Å–∏–≥–Ω–∞–ª–æ–≤)
–ñ–¥–µ–º –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —É–ª—É—á—à–∏–ª–æ—Å—å –ª–∏

### –®–∞–≥ 6: –ò—Ç–µ—Ä–∞—Ü–∏—è
–ü–æ–≤—Ç–æ—Ä—è–µ–º –ø–æ–∫–∞ –≤—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–µ —Å—Ç–∞–Ω—É—Ç üü¢ –∏–ª–∏ üü°

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```
trading_bot.db
  ‚îî‚îÄ‚îÄ main_signals  # –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
      ‚îú‚îÄ‚îÄ strategy_name
      ‚îú‚îÄ‚îÄ pnl_percent
      ‚îú‚îÄ‚îÄ exit_type (TP1/TP2/SL)
      ‚îî‚îÄ‚îÄ status (PROFIT/LOSS/BREAKEVEN)
```

### –°–∫—Ä–∏–ø—Ç—ã:
```
analytics/
  ‚îî‚îÄ‚îÄ strategy_performance.py  # –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
```

### –ö–æ–Ω—Ñ–∏–≥:
```
config.yaml  # –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
```

---

## üéì –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–µ–π—Å–∞

**–ë—ã–ª–æ:**
```
üî¥ CVD Divergence: WR 35% | Avg PnL -0.5% | Expectancy -0.51%
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∏–∑–∫–∏–π –≤–∏–Ω—Ä–µ–π—Ç + —É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```yaml
# config.yaml
strategies:
  - name: "CVD Divergence"
    params:
      min_divergence: 0.3  ‚Üí 0.6  # –£–∂–µ—Å—Ç–æ—á–∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä
      min_volume_ratio: 1.2 ‚Üí 1.5
      
scoring:
  min_score: 2.0 ‚Üí 3.0  # –í—ã—à–µ –ø–æ—Ä–æ–≥
```

**–°—Ç–∞–ª–æ:**
```
üü° CVD Divergence: WR 48% | Avg PnL +0.2% | Expectancy +0.18%
```

‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å—Ç–∞–ª–∞ –ø—Ä–∏–±—ã–ª—å–Ω–æ–π!

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –ó–∞–ø—É—Å—Ç–∏–ª `python analytics/strategy_performance.py`
- [ ] –ù–∞—à–µ–ª —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å Expectancy < 0%
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ (–º–∏–Ω–∏–º—É–º 20)
- [ ] –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–±–ª–µ–º—É (WR/AvgLoss/TP-SL)
- [ ] –ü—Ä–∏–º–µ–Ω–∏–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ config.yaml
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª –±–æ—Ç–∞
- [ ] –ñ–¥—É –Ω–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ (–º–∏–Ω–∏–º—É–º 20)
- [ ] –ü–æ–≤—Ç–æ—Ä–∏–ª –∞–Ω–∞–ª–∏–∑

---

## üìû –ö–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–í Telegram:**
```
/performance     - –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
/ap_stats        - Action Price
/status          - –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
/strategies      - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
```

**–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```bash
# –ê–Ω–∞–ª–∏–∑ –∑–∞ 30 –¥–Ω–µ–π
python analytics/strategy_performance.py --days 30

# –ê–Ω–∞–ª–∏–∑ –∑–∞ –Ω–µ–¥–µ–ª—é
python analytics/strategy_performance.py --days 7

# –ê–Ω–∞–ª–∏–∑ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è
python analytics/strategy_performance.py --days 365
```
